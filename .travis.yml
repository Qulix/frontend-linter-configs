sudo: false
language: node_js
node_js:
  - "11"
  - "10"
  - "9"
  - "8"
  - "7"
  - "6.4.0"
git:
  quiet: true
  depth: 1
notifications:
  email: false
cache:
  directories:
    - ~/.npm
env:
  matrix:
  - TEST=true ESLINT=5
  - TEST=true ESLINT=4
before_install:
  - nvm install-latest-npm
install:
  - npm install
jobs:
  include:
    - stage: npm release
      if: branch = master
      node_js: "10"
      env:
        - NODE_ENV=production
        - PUBLISH=true
      script:
        - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > .npmrc
        - git add .
        - git commit -m 'temp'
        - npm run release
